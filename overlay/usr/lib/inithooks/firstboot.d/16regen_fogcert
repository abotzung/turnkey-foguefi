#!/bin/bash
# This script regen certificates for the FOG Server
# WARNING ; This script needs atleast 1 valid ip address
# WARNING ; This script destruct all present certificates in the system
#  Alexandre BOTZUNG <alexandre.botzung@grandest.fr> - dec. 2022
#
#  --- This script includes components from the FOG Project ---
#  FOG - Free, Open-Source Ghost is a computer imaging solution.
#  Copyright (C) 2007  Chuck Syperski & Jian Zhang
#
#   This program is free software: you can redistribute it and/or modify
#   it under the terms of the GNU General Public License as published by
#   the Free Software Foundation, either version 3 of the License, or
#    any later version.
#
#   This program is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty of
#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#   GNU General Public License for more details.
#
#   You should have received a copy of the GNU General Public License
#   along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
# * @package  FOGProject
# * @author   Tom Elliott <tommygunsster@gmail.com>
# * @license  http://opensource.org/licenses/gpl-3.0 GPLv3
# * @link     https://fogproject.org


# As this script is generated by FAB, we cannot "preseed". So, inithooks do it for us
cp /usr/lib/inithooks/firstboot.d/17recompile_ipxecerts /usr/bin/recompileipxe-fogserver
chmod 0755 /usr/bin/recompileipxe-fogserver

regencert-fogserver
exit 0

